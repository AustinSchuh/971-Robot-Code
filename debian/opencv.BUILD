load("@//tools/build_rules:select.bzl", "cpu_select")

cc_library(
    name = "opencv",
    srcs = cpu_select({
        "amd64": [
        ],
        "roborio": [
        ],
        "armhf": [
            "usr/lib/arm-linux-gnueabihf/libopencv_core.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_features2d.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_imgproc.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_flann.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_highgui.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_videoio.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_imgcodecs.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libopencv_ml.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libtbb.so.2",
            "usr/lib/arm-linux-gnueabihf/libgtk-3.so.0",
            "usr/lib/arm-linux-gnueabihf/libgdk-3.so.0",
            "usr/lib/arm-linux-gnueabihf/libpangocairo-1.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libpango-1.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libatk-1.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libgdcmDICT.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgdcmCommon.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgdcmIOD.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgdcmMSFF.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libavutil.so.56",
            "usr/lib/arm-linux-gnueabihf/libswscale.so.5",
            "usr/lib/arm-linux-gnueabihf/libavresample.so.4",
            "usr/lib/arm-linux-gnueabihf/libcairo-gobject.so.2",
            "usr/lib/arm-linux-gnueabihf/libcairo.so.2",
            "usr/lib/arm-linux-gnueabihf/libgdk_pixbuf-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libgio-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libgobject-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libglib-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libgthread-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libdc1394.so.22",
            "usr/lib/arm-linux-gnueabihf/libgphoto2.so.6",
            "usr/lib/arm-linux-gnueabihf/libgphoto2_port.so.12",
            "usr/lib/arm-linux-gnueabihf/libavcodec.so.58",
            "usr/lib/arm-linux-gnueabihf/libavformat.so.58",
            "usr/lib/arm-linux-gnueabihf/libjpeg.so.62",
            "usr/lib/arm-linux-gnueabihf/libwebp.so.6",
            "usr/lib/arm-linux-gnueabihf/libpng16.so.16",
            "usr/lib/arm-linux-gnueabihf/libtiff.so.5",
            "usr/lib/arm-linux-gnueabihf/libImath-2_2.so.23",
            "usr/lib/arm-linux-gnueabihf/libIlmImf-2_2.so.23",
            "usr/lib/arm-linux-gnueabihf/libIex-2_2.so.23",
            "usr/lib/arm-linux-gnueabihf/libHalf.so.23",
            "usr/lib/arm-linux-gnueabihf/libIlmThread-2_2.so.23",
            "usr/lib/libgdal.so.20",
            "usr/lib/arm-linux-gnueabihf/libgdcmDSED.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgmodule-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libX11.so.6",
            "usr/lib/arm-linux-gnueabihf/libXi.so.6",
            "usr/lib/arm-linux-gnueabihf/libXcomposite.so.1",
            "usr/lib/arm-linux-gnueabihf/libXdamage.so.1",
            "usr/lib/arm-linux-gnueabihf/libXfixes.so.3",
            "usr/lib/arm-linux-gnueabihf/libatk-bridge-2.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libxkbcommon.so.0",
            "usr/lib/arm-linux-gnueabihf/libwayland-cursor.so.0",
            "usr/lib/arm-linux-gnueabihf/libwayland-egl.so.1",
            "usr/lib/arm-linux-gnueabihf/libwayland-client.so.0",
            "usr/lib/arm-linux-gnueabihf/libepoxy.so.0",
            "usr/lib/arm-linux-gnueabihf/libharfbuzz.so.0",
            "usr/lib/arm-linux-gnueabihf/libpangoft2-1.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libfontconfig.so.1",
            "usr/lib/arm-linux-gnueabihf/libfreetype.so.6",
            "usr/lib/arm-linux-gnueabihf/libXinerama.so.1",
            "usr/lib/arm-linux-gnueabihf/libXrandr.so.2",
            "usr/lib/arm-linux-gnueabihf/libXcursor.so.1",
            "usr/lib/arm-linux-gnueabihf/libXext.so.6",
            "usr/lib/arm-linux-gnueabihf/libthai.so.0",
            "usr/lib/arm-linux-gnueabihf/libfribidi.so.0",
            "usr/lib/arm-linux-gnueabihf/libcrypto.so.1.1",
            "lib/arm-linux-gnueabihf/libexpat.so.1",
            "usr/lib/arm-linux-gnueabihf/libgdcmjpeg8.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgdcmjpeg12.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libgdcmjpeg16.so.2.8",
            "usr/lib/arm-linux-gnueabihf/libopenjp2.so.7",
            "usr/lib/arm-linux-gnueabihf/libCharLS.so.2",
            "lib/arm-linux-gnueabihf/libuuid.so.1",
            "usr/lib/arm-linux-gnueabihf/libjson-c.so.3",
            "usr/lib/arm-linux-gnueabihf/libva-drm.so.2",
            "usr/lib/arm-linux-gnueabihf/libva.so.2",
            "usr/lib/arm-linux-gnueabihf/libva-x11.so.2",
            "usr/lib/arm-linux-gnueabihf/libvdpau.so.1",
            "usr/lib/arm-linux-gnueabihf/libdrm.so.2",
            "usr/lib/arm-linux-gnueabihf/libpixman-1.so.0",
            "usr/lib/arm-linux-gnueabihf/libxcb-shm.so.0",
            "usr/lib/arm-linux-gnueabihf/libxcb.so.1",
            "usr/lib/arm-linux-gnueabihf/libxcb-render.so.0",
            "usr/lib/arm-linux-gnueabihf/libXrender.so.1",
            "lib/arm-linux-gnueabihf/libmount.so.1",
            "usr/lib/arm-linux-gnueabihf/libffi.so.6",
            "usr/lib/arm-linux-gnueabihf/libraw1394.so.11",
            "lib/arm-linux-gnueabihf/libusb-1.0.so.0",
            "usr/lib/arm-linux-gnueabihf/libltdl.so.7",
            "usr/lib/arm-linux-gnueabihf/libexif.so.12",
            "usr/lib/arm-linux-gnueabihf/libswresample.so.3",
            "usr/lib/arm-linux-gnueabihf/libvpx.so.5",
            "usr/lib/arm-linux-gnueabihf/libwebpmux.so.3",
            "opt/vc/lib/libmmal_core.so",
            "opt/vc/lib/libmmal_util.so",
            "opt/vc/lib/libmmal_vc_client.so",
            "opt/vc/lib/libbcm_host.so",
            "usr/lib/arm-linux-gnueabihf/librsvg-2.so.2",
            "usr/lib/arm-linux-gnueabihf/libzvbi.so.0",
            "usr/lib/arm-linux-gnueabihf/libsnappy.so.1",
            "usr/lib/arm-linux-gnueabihf/libaom.so.0",
            "usr/lib/arm-linux-gnueabihf/libcodec2.so.0.8.1",
            "usr/lib/arm-linux-gnueabihf/libgsm.so.1",
            "usr/lib/arm-linux-gnueabihf/libmp3lame.so.0",
            "usr/lib/arm-linux-gnueabihf/libopus.so.0",
            "usr/lib/arm-linux-gnueabihf/libshine.so.3",
            "usr/lib/arm-linux-gnueabihf/libspeex.so.1",
            "usr/lib/arm-linux-gnueabihf/libtheoraenc.so.1",
            "usr/lib/arm-linux-gnueabihf/libtheoradec.so.1",
            "usr/lib/arm-linux-gnueabihf/libtwolame.so.0",
            "usr/lib/arm-linux-gnueabihf/libvorbis.so.0",
            "usr/lib/arm-linux-gnueabihf/libvorbisenc.so.2",
            "usr/lib/arm-linux-gnueabihf/libwavpack.so.1",
            "usr/lib/arm-linux-gnueabihf/libx264.so.155",
            "usr/lib/arm-linux-gnueabihf/libx265.so.165",
            "usr/lib/arm-linux-gnueabihf/libxvidcore.so.4",
            "usr/lib/arm-linux-gnueabihf/libxml2.so.2",
            "usr/lib/arm-linux-gnueabihf/libgme.so.0",
            "usr/lib/arm-linux-gnueabihf/libopenmpt.so.0",
            "usr/lib/arm-linux-gnueabihf/libchromaprint.so.1",
            "usr/lib/arm-linux-gnueabihf/libbluray.so.2",
            "usr/lib/arm-linux-gnueabihf/libgnutls.so.30",
            "usr/lib/arm-linux-gnueabihf/libssh-gcrypt.so.4",
            "usr/lib/arm-linux-gnueabihf/libzstd.so.1",
            "usr/lib/arm-linux-gnueabihf/libjbig.so.0",
            "usr/lib/libarmadillo.so.9",
            "usr/lib/arm-linux-gnueabihf/libproj.so.13",
            "usr/lib/arm-linux-gnueabihf/libpoppler.so.82",
            "usr/lib/arm-linux-gnueabihf/libfreexl.so.1",
            "usr/lib/arm-linux-gnueabihf/libqhull.so.7",
            "usr/lib/arm-linux-gnueabihf/libgeos_c.so.1",
            "usr/lib/arm-linux-gnueabihf/libepsilon.so.1",
            "usr/lib/arm-linux-gnueabihf/libodbc.so.2",
            "usr/lib/arm-linux-gnueabihf/libodbcinst.so.2",
            "usr/lib/arm-linux-gnueabihf/libkmlbase.so.1",
            "usr/lib/arm-linux-gnueabihf/libkmldom.so.1",
            "usr/lib/arm-linux-gnueabihf/libkmlengine.so.1",
            "usr/lib/arm-linux-gnueabihf/libkmlxsd.so.1",
            "usr/lib/arm-linux-gnueabihf/libkmlregionator.so.1",
            "usr/lib/arm-linux-gnueabihf/libxerces-c-3.2.so",
            "usr/lib/arm-linux-gnueabihf/libnetcdf.so.13",
            "usr/lib/arm-linux-gnueabihf/libhdf5_serial_hl.so.100",
            "usr/lib/arm-linux-gnueabihf/libsz.so.2",
            "usr/lib/arm-linux-gnueabihf/libhdf5_serial.so.103",
            "usr/lib/libmfhdfalt.so.0",
            "usr/lib/libdfalt.so.0",
            "usr/lib/libogdi.so.3.2",
            "usr/lib/arm-linux-gnueabihf/libgif.so.7",
            "usr/lib/arm-linux-gnueabihf/libgeotiff.so.2",
            "usr/lib/arm-linux-gnueabihf/libpq.so.5",
            "usr/lib/arm-linux-gnueabihf/libdapclient.so.6",
            "usr/lib/arm-linux-gnueabihf/libdapserver.so.7",
            "usr/lib/arm-linux-gnueabihf/libdap.so.25",
            "usr/lib/arm-linux-gnueabihf/libspatialite.so.7",
            "usr/lib/arm-linux-gnueabihf/libcurl-gnutls.so.4",
            "usr/lib/arm-linux-gnueabihf/libfyba.so.0",
            "usr/lib/arm-linux-gnueabihf/libfygm.so.0",
            "usr/lib/arm-linux-gnueabihf/libfyut.so.0",
            "usr/lib/arm-linux-gnueabihf/libmariadb.so.3",
            "lib/arm-linux-gnueabihf/libdbus-1.so.3",
            "usr/lib/arm-linux-gnueabihf/libatspi.so.0",
            "usr/lib/arm-linux-gnueabihf/libgraphite2.so.3",
            "usr/lib/arm-linux-gnueabihf/libdatrie.so.1",
            "usr/lib/arm-linux-gnueabihf/libXau.so.6",
            "usr/lib/arm-linux-gnueabihf/libXdmcp.so.6",
            "lib/arm-linux-gnueabihf/libblkid.so.1",
            "lib/arm-linux-gnueabihf/libudev.so.1",
            "usr/lib/arm-linux-gnueabihf/libsoxr.so.0",
            "opt/vc/lib/libvcos.so",
            "opt/vc/lib/libvchiq_arm.so",
            "opt/vc/lib/libvcsm.so",
            "usr/lib/arm-linux-gnueabihf/libcroco-0.6.so.3",
            "usr/lib/arm-linux-gnueabihf/libogg.so.0",
            "usr/lib/arm-linux-gnueabihf/libicui18n.so.63",
            "usr/lib/arm-linux-gnueabihf/libicuuc.so.63",
            "usr/lib/arm-linux-gnueabihf/libicudata.so.63",
            "usr/lib/arm-linux-gnueabihf/libmpg123.so.0",
            "usr/lib/arm-linux-gnueabihf/libvorbisfile.so.3",
            "usr/lib/arm-linux-gnueabihf/libp11-kit.so.0",
            "usr/lib/arm-linux-gnueabihf/libidn2.so.0",
            "usr/lib/arm-linux-gnueabihf/libunistring.so.2",
            "usr/lib/arm-linux-gnueabihf/libtasn1.so.6",
            "usr/lib/arm-linux-gnueabihf/libnettle.so.6",
            "usr/lib/arm-linux-gnueabihf/libhogweed.so.4",
            "usr/lib/arm-linux-gnueabihf/libgmp.so.10",
            "lib/arm-linux-gnueabihf/libgcrypt.so.20",
            "usr/lib/arm-linux-gnueabihf/libgssapi_krb5.so.2",
            "usr/lib/arm-linux-gnueabihf/blas/libblas.so.3",
            "usr/lib/arm-linux-gnueabihf/lapack/liblapack.so.3",
            "usr/lib/arm-linux-gnueabihf/libarpack.so.2",
            "usr/lib/arm-linux-gnueabihf/libsuperlu.so.5",
            "usr/lib/arm-linux-gnueabihf/libnss3.so",
            "usr/lib/arm-linux-gnueabihf/libsmime3.so",
            "usr/lib/arm-linux-gnueabihf/libnspr4.so",
            "usr/lib/arm-linux-gnueabihf/liblcms2.so.2",
            "usr/lib/arm-linux-gnueabihf/libgeos-3.7.1.so",
            "usr/lib/arm-linux-gnueabihf/libpopt.so.0",
            "usr/lib/arm-linux-gnueabihf/libminizip.so.1",
            "usr/lib/arm-linux-gnueabihf/liburiparser.so.1",
            "usr/lib/arm-linux-gnueabihf/libkmlconvenience.so.1",
            "usr/lib/arm-linux-gnueabihf/libaec.so.0",
            "usr/lib/arm-linux-gnueabihf/libssl.so.1.1",
            "usr/lib/arm-linux-gnueabihf/libldap_r-2.4.so.2",
            "usr/lib/arm-linux-gnueabihf/libsqlite3.so.0",
            "usr/lib/arm-linux-gnueabihf/libnghttp2.so.14",
            "usr/lib/arm-linux-gnueabihf/librtmp.so.1",
            "usr/lib/arm-linux-gnueabihf/libssh2.so.1",
            "usr/lib/arm-linux-gnueabihf/libpsl.so.5",
            "usr/lib/arm-linux-gnueabihf/libkrb5.so.3",
            "usr/lib/arm-linux-gnueabihf/libk5crypto.so.3",
            "lib/arm-linux-gnueabihf/libcom_err.so.2",
            "usr/lib/arm-linux-gnueabihf/liblber-2.4.so.2",
            "lib/arm-linux-gnueabihf/libsystemd.so.0",
            "usr/lib/arm-linux-gnueabihf/libbsd.so.0",
            "lib/arm-linux-gnueabihf/libgpg-error.so.0",
            "usr/lib/arm-linux-gnueabihf/libkrb5support.so.0",
            "lib/arm-linux-gnueabihf/libkeyutils.so.1",
            "usr/lib/arm-linux-gnueabihf/libgfortran.so.5",
            "usr/lib/arm-linux-gnueabihf/libnssutil3.so",
            "usr/lib/arm-linux-gnueabihf/libplc4.so",
            "usr/lib/arm-linux-gnueabihf/libplds4.so",
            "usr/lib/arm-linux-gnueabihf/libsasl2.so.2",
            "usr/lib/arm-linux-gnueabihf/liblz4.so.1",
            "lib/arm-linux-gnueabihf/libz.so.1",
            "usr/lib/arm-linux-gnueabihf/libatomic.so.1",
            "lib/arm-linux-gnueabihf/libselinux.so.1",
            "lib/arm-linux-gnueabihf/libpcre.so.3",
            "lib/arm-linux-gnueabihf/liblzma.so.5",
            "lib/arm-linux-gnueabihf/libbz2.so.1.0",
            "usr/lib/arm-linux-gnueabihf/libgomp.so.1",
        ],
        "cortex-m": [],
    }),
    hdrs = glob([
        "usr/include/opencv/**",
        "usr/include/opencv2/**",
    ]),
    includes = [
        "usr/include",
    ],
    linkopts = [
        "-ldl",
        "-lnsl",
        "-lresolv",
    ],
    visibility = ["//visibility:public"],
)
